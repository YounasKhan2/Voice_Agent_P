<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Account - WanderBot</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts - Plus Jakarta Sans -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">

  <!-- Material Symbols Outlined -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Plus Jakarta Sans', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'sans-serif'],
          },
          colors: {
            primary: '#137fec',
            'primary-hover': '#0f6fd4',
          }
        }
      }
    }
  </script>

  <style>
    body {
      font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
  </style>
</head>

<body class="bg-[#f6f7f8] dark:bg-[#101922] text-gray-900 dark:text-gray-100 min-h-screen">

  <!-- Header -->
  <header class="bg-white dark:bg-[#192633] border-b border-gray-200 dark:border-white/10">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <!-- Logo and Title -->
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white font-bold">
          W
        </div>
        <div>
          <h1 class="text-lg font-bold text-gray-900 dark:text-white">WanderBot</h1>
          <p class="text-xs text-gray-600 dark:text-gray-400">AI Travel Agent</p>
        </div>
      </div>

      <!-- Navigation -->
      <nav class="flex items-center gap-2">
        <a href="{{ url_for('chat') }}"
          class="flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 text-gray-700 dark:text-gray-300 transition-colors duration-200">
          <span class="material-symbols-outlined text-xl">chat</span>
          <span class="text-sm font-medium">Chat</span>
        </a>
        <a href="{{ url_for('logout') }}"
          class="flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 text-gray-700 dark:text-gray-300 transition-colors duration-200">
          <span class="material-symbols-outlined text-xl">logout</span>
          <span class="text-sm font-medium">Logout</span>
        </a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto px-6 py-8">
    
    <!-- Page Header -->
    <div class="mb-8">
      <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">My Account</h2>
      <p class="text-gray-600 dark:text-gray-400">Manage your account information and preferences</p>
    </div>

    <!-- Success/Error Messages -->
    {% if success_message %}
    <div class="mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-start gap-3">
      <span class="material-symbols-outlined text-green-600 dark:text-green-400">check_circle</span>
      <p class="text-green-800 dark:text-green-200 text-sm">{{ success_message }}</p>
    </div>
    {% endif %}

    {% if error_message %}
    <div class="mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start gap-3">
      <span class="material-symbols-outlined text-red-600 dark:text-red-400">error</span>
      <p class="text-red-800 dark:text-red-200 text-sm">{{ error_message }}</p>
    </div>
    {% endif %}

    <!-- Account Information Card -->
    <section class="bg-white dark:bg-[#192633] rounded-xl border border-gray-200 dark:border-white/10 p-6 mb-6">
      <div class="flex items-center gap-3 mb-6">
        <span class="material-symbols-outlined text-2xl text-primary">account_circle</span>
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">Account Information</h3>
      </div>

      <!-- Account Details -->
      <div class="space-y-4 p-4 bg-gray-50 dark:bg-black/20 rounded-lg">
        <div class="flex items-center justify-between">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Email</span>
          <span class="text-sm text-gray-900 dark:text-white">{{ profile.email }}</span>
        </div>
        <div class="flex items-center justify-between">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Display Name</span>
          <span class="text-sm text-gray-900 dark:text-white">{{ profile.display_name }}</span>
        </div>
        <div class="flex items-center justify-between">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Account Created</span>
          <span class="text-sm text-gray-900 dark:text-white">{{ profile.created_at }}</span>
        </div>
      </div>
    </section>

    <!-- Voice Agent Preferences Card -->
    <section class="bg-white dark:bg-[#192633] rounded-xl border border-gray-200 dark:border-white/10 p-6 mb-6">
      <div class="flex items-center gap-3 mb-6">
        <span class="material-symbols-outlined text-2xl text-primary">settings_voice</span>
        <div>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white">Voice Agent Preferences</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400">Customize how the voice agent interacts with you</p>
        </div>
      </div>

      <form method="POST" action="{{ url_for('profile') }}" class="space-y-6">
        <input type="hidden" name="form_type" value="update_preferences" />
        
        <!-- Preferred Voice -->
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            Preferred Voice
          </label>
          <select name="preferred_voice"
            class="w-full px-4 py-3 bg-white dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors">
            <option value="alloy" {% if profile.preferences.preferred_voice == 'alloy' %}selected{% endif %}>Alloy</option>
            <option value="echo" {% if profile.preferences.preferred_voice == 'echo' %}selected{% endif %}>Echo</option>
            <option value="fable" {% if profile.preferences.preferred_voice == 'fable' %}selected{% endif %}>Fable</option>
            <option value="onyx" {% if profile.preferences.preferred_voice == 'onyx' %}selected{% endif %}>Onyx</option>
            <option value="nova" {% if profile.preferences.preferred_voice == 'nova' %}selected{% endif %}>Nova</option>
            <option value="shimmer" {% if profile.preferences.preferred_voice == 'shimmer' %}selected{% endif %}>Shimmer</option>
          </select>
          <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">The voice the agent will use when speaking to you</p>
        </div>
        
        <!-- Favorite Topics -->
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            Favorite Topics
          </label>
          <input type="text" name="favorite_topics" value="{{ profile.preferences.favorite_topics|join(', ') }}" 
            placeholder="travel, food, technology"
            class="w-full px-4 py-3 bg-white dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors" />
          <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Comma-separated list of topics you're interested in</p>
        </div>
        
        <!-- Custom System Prompt -->
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            Custom System Prompt (Optional)
          </label>
          <textarea name="system_prompt_override" rows="4" 
            placeholder="You are a helpful assistant..."
            class="w-full px-4 py-3 bg-white dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors resize-none">{{ profile.preferences.system_prompt_override }}</textarea>
          <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Override the default agent behavior with a custom prompt</p>
        </div>
        
        <button type="submit"
          class="w-full bg-primary hover:bg-primary-hover text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-gray-900">
          Save Preferences
        </button>
      </form>
    </section>

    <!-- Change Password Card -->
    <section class="bg-white dark:bg-[#192633] rounded-xl border border-gray-200 dark:border-white/10 p-6">
      <div class="flex items-center gap-3 mb-6">
        <span class="material-symbols-outlined text-2xl text-primary">lock</span>
        <div>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white">Change Password</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400">Update your account password</p>
        </div>
      </div>

      <form method="POST" action="{{ url_for('profile') }}" class="space-y-4">
        <input type="hidden" name="form_type" value="change_password" />
        
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            Current Password
          </label>
          <input type="password" name="current_password" 
            placeholder="Enter your current password" required
            class="w-full px-4 py-3 bg-white dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors" />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            New Password
          </label>
          <input type="password" name="new_password" 
            placeholder="Enter your new password (min 8 characters)" required minlength="8"
            class="w-full px-4 py-3 bg-white dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors" />
        </div>
        
        <button type="submit"
          class="w-full bg-primary hover:bg-primary-hover text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-gray-900">
          Change Password
        </button>
      </form>
    </section>

  </main>

  <script src="{{ url_for('static', filename='js/toast.js') }}"></script>

</body>

</html>
